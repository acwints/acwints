<!DOCTYPE html>
<html lang="en" data-theme="dark">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Acwints - 2024 Activity Tracking</title>
    <link rel="icon" type="image/svg+xml" href="favicon.svg">
    <meta name="description" content="View your 2024 fitness and health data with beautiful visualizations">
    <link rel="stylesheet" href="styles.css">
    <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/chartjs-adapter-date-fns"></script>
    <script src="https://cdn.jsdelivr.net/npm/chartjs-plugin-datalabels@2.0.0"></script>
    <script src="https://apis.google.com/js/api.js"></script>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0/css/all.min.css">
    <style>
        .location-calendar {
            display: grid;
            grid-template-columns: auto 1fr;
            gap: 0;
            padding: 16px;
            background: rgba(255, 255, 255, 0.08);
            border-radius: 12px;
            max-width: 1400px;
            margin: 0 auto;
        }

        .weekday-column {
            display: grid;
            grid-template-rows: repeat(7, 1fr);
            padding-right: 8px;
            padding-top: 24px;
            width: 40px;
        }

        .calendar-weekday {
            font-size: 11px;
            display: flex;
            align-items: center;
            padding-right: 8px;
        }

        .calendar-main {
            display: flex;
            flex-direction: column;
            gap: 0;
            min-width: 0;
        }

        .month-row {
            display: grid;
            grid-template-columns: repeat(53, 1fr);
            margin-bottom: 0;
            font-size: 11px;
            height: 24px;
            align-items: flex-end;
            padding-bottom: 4px;
        }

        .month-label {
            text-align: center;
            line-height: 1;
        }

        .days-grid {
            display: grid;
            grid-template-columns: repeat(53, 1fr);
            grid-template-rows: repeat(7, 1fr);
            gap: 0;
            border: 1px solid rgba(255, 255, 255, 0.1);
            background: rgba(255, 255, 255, 0.1);
            aspect-ratio: 53 / 7;
        }

        .calendar-day {
            background: rgba(255, 255, 255, 0.15);
            border: 1px solid rgba(255, 255, 255, 0.2);
            margin: -1px 0 0 -1px;
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 10px;
            font-weight: 500;
            color: rgba(255, 255, 255, 0.95);
            cursor: pointer;
            transition: all 0.2s ease;
            position: relative;
            background-size: 100% 100%;
            background-position: center;
            background-repeat: no-repeat;
            aspect-ratio: 1 / 1.3;
        }

        .calendar-month-label {
            font-size: 11px;
            color: rgba(255, 255, 255, 0.6);
            text-align: left;
            grid-column: 1 / -1;
            display: flex;
            justify-content: space-between;
            padding-bottom: 8px;
        }

        .calendar-day.spacer {
            background: transparent;
            border: none;
            cursor: default;
        }

        .calendar-day:not(.spacer):hover {
            transform: none;
            background-color: #ffffff;
        }

        .calendar-day.has-location {
            background-color: rgba(255, 255, 255, 0.25);
        }

        .calendar-day.has-location:hover {
            background-color: rgba(255, 255, 255, 0.35);
        }

        .location-text {
            font-size: 10px;
            color: rgba(255, 255, 255, 0.9);
            text-align: center;
            overflow: hidden;
            text-overflow: ellipsis;
            white-space: nowrap;
            width: 100%;
            text-shadow: 0 0 3px rgba(0, 0, 0, 0.8);
            padding: 0 1px;
        }

        .calendar-tooltip {
            position: absolute;
            bottom: 100%;
            left: 50%;
            transform: translateX(-50%);
            background: rgba(0, 0, 0, 0.8);
            color: white;
            padding: 4px 8px;
            border-radius: 4px;
            font-size: 11px;
            white-space: nowrap;
            pointer-events: none;
            opacity: 0;
            transition: opacity 0.2s ease;
            z-index: 1000;
            margin-bottom: 4px;
        }

        .calendar-day:hover .calendar-tooltip {
            opacity: 1;
        }

        .day-number {
            display: none;
        }

        /* Empty corner cell */
        .calendar-corner {
            display: none;
        }

        /* Add Goodreads specific styles */
        .goodreads-section {
            background: linear-gradient(135deg, #4a3600 0%, #755c00 100%);
            color: var(--light-text);
        }

        .goodreads-section .chart-container {
            background-color: rgba(255, 236, 179, 0.1);
            backdrop-filter: blur(10px);
            border-radius: 12px;
            padding: 2rem;
            margin: 1.5rem;
            box-shadow: 0 4px 15px rgba(0, 0, 0, 0.2);
            height: auto;
            min-height: 300px;
        }

        .goodreads-section .metric-header {
            margin-bottom: 2rem;
            position: relative;
        }

        .goodreads-section .metric-header::after {
            content: '';
            position: absolute;
            bottom: -1rem;
            left: 0;
            right: 0;
            height: 1px;
            background: linear-gradient(90deg, rgba(255,255,255,0.2) 0%, rgba(255,255,255,0.1) 100%);
        }

        .goodreads-section .books-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(300px, 1fr));
            gap: 1.5rem;
            width: 100%;
            margin: 0;
            padding: 0;
        }

        .book-card {
            display: flex;
            gap: 1.25rem;
            background: rgba(255, 255, 255, 0.1);
            padding: 1.25rem;
            border-radius: 12px;
            text-decoration: none;
            color: var(--light-text);
            transition: all 0.3s ease;
            border: 1px solid rgba(255, 255, 255, 0.05);
        }

        .book-card:hover {
            transform: translateY(-2px);
            background: rgba(255, 255, 255, 0.15);
            border-color: rgba(255, 255, 255, 0.1);
            box-shadow: 0 8px 20px rgba(0, 0, 0, 0.2);
        }

        .book-cover {
            width: 110px;
            min-width: 110px;
            height: 165px;
            border-radius: 8px;
            overflow: hidden;
            box-shadow: 0 4px 12px rgba(0, 0, 0, 0.3);
            position: relative;
        }

        .book-cover::after {
            content: '';
            position: absolute;
            top: 0;
            left: 0;
            right: 0;
            bottom: 0;
            background: linear-gradient(to bottom, rgba(0,0,0,0) 0%, rgba(0,0,0,0.2) 100%);
            pointer-events: none;
        }

        .book-cover img {
            width: 100%;
            height: 100%;
            object-fit: cover;
            transition: transform 0.3s ease;
        }

        .book-card:hover .book-cover img {
            transform: scale(1.05);
        }

        .book-info {
            display: flex;
            flex-direction: column;
            gap: 0.75rem;
            flex: 1;
            min-width: 0;
            padding: 0.25rem 0;
        }

        .book-title {
            font-size: 1.2rem;
            font-weight: 600;
            margin: 0;
            line-height: 1.3;
            overflow: hidden;
            text-overflow: ellipsis;
            display: -webkit-box;
            -webkit-line-clamp: 2;
            -webkit-box-orient: vertical;
            color: rgba(255, 255, 255, 0.95);
        }

        .book-author {
            font-size: 0.95rem;
            color: rgba(255, 255, 255, 0.8);
            margin: 0;
            line-height: 1.4;
        }

        .book-rating {
            font-size: 0.95rem;
            color: #ffd700;
            letter-spacing: 2px;
            margin-top: 0.25rem;
        }

        .book-date {
            font-size: 0.9rem;
            color: rgba(255, 255, 255, 0.6);
            margin-top: auto;
            padding-top: 0.5rem;
            border-top: 1px solid rgba(255, 255, 255, 0.1);
        }

        .books-loading {
            text-align: center;
            padding: 3rem;
            color: rgba(255, 255, 255, 0.8);
            font-size: 1.1rem;
            background: rgba(255, 255, 255, 0.05);
            border-radius: 12px;
            margin: 1rem 0;
        }

        .books-error {
            text-align: center;
            padding: 2rem;
            color: #ff6b6b;
            font-size: 1.1rem;
            background: rgba(255, 0, 0, 0.1);
            border-radius: 12px;
            margin: 1rem 0;
            border: 1px solid rgba(255, 107, 107, 0.2);
        }

        @media (max-width: 768px) {
            .goodreads-section .chart-container {
                margin: 1rem;
                padding: 1.5rem;
            }

            .goodreads-section .metric-header {
                margin-bottom: 1.5rem;
            }

            .books-grid {
                grid-template-columns: 1fr;
                gap: 1.25rem;
            }

            .book-card {
                padding: 1rem;
                gap: 1rem;
            }

            .book-cover {
                width: 90px;
                min-width: 90px;
                height: 135px;
            }

            .book-title {
                font-size: 1.1rem;
            }

            .book-author {
                font-size: 0.9rem;
            }

            .book-rating {
                font-size: 0.9rem;
                letter-spacing: 1.5px;
            }

            .book-date {
                font-size: 0.85rem;
            }
        }

        @media (max-width: 480px) {
            .goodreads-section .chart-container {
                margin: 0.75rem;
                padding: 1rem;
            }

            .books-grid {
                gap: 1rem;
            }

            .book-card {
                padding: 0.875rem;
                gap: 0.875rem;
            }

            .book-cover {
                width: 80px;
                min-width: 80px;
                height: 120px;
            }

            .books-loading,
            .books-error {
                padding: 1.5rem;
                font-size: 1rem;
            }
        }
    </style>
</head>
<body>
    <nav>
        <div class="logo"><a href="index.html">acwints</a></div>
        <div class="nav-links">
            <a href="2024.html" class="active">2024</a>
        </div>
    </nav>
    <main>
        <div class="container">
            <section class="platform-section strava-section">
                <div class="platform-header">
                    <a href="https://www.strava.com/athletes/67827008" target="_blank" class="platform-link">
                        <div class="platform-logo-wrapper">
                            <img src="images/strava.png" alt="Strava" class="platform-logo">
                        </div>
                        <h1>Strava</h1>
                    </a>
                </div>
                <div class="content-grid">
                    <div class="chart-container">
                        <div class="metric-header">
                            <i class="fas fa-running"></i>
                            <h2>Running/Walking Distance</h2>
                        </div>
                        <canvas id="runningChart"></canvas>
                    </div>
                    <div class="chart-container">
                        <div class="metric-header">
                            <i class="fas fa-bicycle"></i>
                            <h2>Biking/Cycling Distance</h2>
                        </div>
                        <canvas id="bikingChart"></canvas>
                    </div>
                </div>
            </section>

            <section class="platform-section location-section">
                <div class="platform-header">
                    <div class="platform-logo-wrapper">
                        <i class="fas fa-map-marker-alt fa-2x"></i>
                    </div>
                    <h1>Travel</h1>
                </div>
                <div class="content-grid">
                    <div class="chart-container">
                        <div class="metric-header">
                            <i class="fas fa-calendar"></i>
                            <h2>Calendar</h2>
                        </div>
                        <div class="location-calendar" id="locationCalendar">
                            <!-- Calendar will be populated by JavaScript -->
                        </div>
                    </div>
                </div>
            </section>

            <section class="platform-section bantee-section">
                <div class="platform-header">
                    <a href="https://www.banteegolf.com" target="_blank" class="platform-link">
                        <div class="platform-logo-wrapper">
                            <img src="https://media.licdn.com/dms/image/v2/D4E0BAQFmlGZIH9ds7w/company-logo_100_100/company-logo_100_100/0/1706288254448/banteegolf_logo?e=1743033600&v=beta&t=xQGt7lajcz0l8BAmiOPhil-sGlzIhYM3ixzGl1rSCa4" alt="Bantee" class="platform-logo">
                        </div>
                        <h1>Bantee</h1>
                    </a>
                </div>
                <div class="content-grid">
                    <div class="chart-container">
                        <div class="metric-header">
                            <i class="fas fa-golf-ball"></i>
                            <h2>Total Rounds</h2>
                        </div>
                        <div class="stat-display">
                            <div class="stat-number">17</div>
                        </div>
                    </div>
                    <div class="chart-container">
                        <div class="metric-header">
                            <i class="fas fa-chart-line"></i>
                            <h2>Average Score</h2>
                        </div>
                        <div class="stat-display">
                            <div class="stat-number">78 (+6.3)</div>
                        </div>
                    </div>
                    <div class="chart-container">
                        <div class="metric-header">
                            <i class="fas fa-dove"></i>
                            <h2>Total Birdies</h2>
                        </div>
                        <div class="stat-display">
                            <div class="stat-number">38</div>
                        </div>
                    </div>
                </div>
            </section>

            <section class="platform-section github-section">
                <div class="platform-header">
                    <a href="https://github.com/acwints" target="_blank" class="platform-link">
                        <div class="platform-logo-wrapper">
                            <i class="fab fa-github fa-2x"></i>
                        </div>
                        <h1>GitHub</h1>
                    </a>
                </div>
                <div class="content-grid">
                    <div class="chart-container">
                        <div class="metric-header">
                            <i class="fas fa-laptop-code"></i>
                            <h2>Code Shipped</h2>
                        </div>
                        <div class="github-contributions">
                            <img src="https://ghchart.rshah.org/1ed760/acwints" alt="GitHub Contributions Graph" class="contributions-graph" />
                            <div class="github-stats">
                                <div class="stat-item">
                                    <div class="stat-label">Total Contributions</div>
                                    <div class="stat-value">1,247</div>
                                </div>
                                <div class="stat-item">
                                    <div class="stat-label">Unique Active Days</div>
                                    <div class="stat-value">183</div>
                                </div>
                                <div class="stat-item">
                                    <div class="stat-label">Longest Active Streak</div>
                                    <div class="stat-value">19</div>
                                </div>
                            </div>
                        </div>

                        <script>
                            document.addEventListener('DOMContentLoaded', function() {
                                // Static values are already in place, no need for dynamic fetching
                            });
                        </script>
                    </div>
                </div>
            </section>

            <section class="platform-section withings-section">
                <div class="platform-header">
                    <div class="platform-logo-wrapper">
                        <img src="https://m.media-amazon.com/images/I/514Lr2Tq-4L.png" alt="Withings" class="platform-logo">
                    </div>
                    <h1>Withings</h1>
                </div>
                <div class="content-grid">
                    <div class="chart-container">
                        <div class="metric-header">
                            <i class="fas fa-weight"></i>
                            <h2>Health</h2>
                        </div>
                        <canvas id="weightChart"></canvas>
                    </div>
                </div>
            </section>

            <section class="platform-section goodreads-section">
                <div class="platform-header">
                    <a href="https://www.goodreads.com/user/show/112492946-andrew" target="_blank" class="platform-link">
                        <div class="platform-logo-wrapper">
                            <img src="https://upload.wikimedia.org/wikipedia/commons/thumb/5/5a/Goodreads_logo_-_SuperTinyIcons.svg/512px-Goodreads_logo_-_SuperTinyIcons.svg.png" alt="Goodreads" class="platform-logo">
                        </div>
                        <h1>Goodreads</h1>
                    </a>
                </div>
                <div class="chart-container">
                    <div class="metric-header">
                        <i class="fas fa-book"></i>
                        <h2>2024 Reading Challenge</h2>
                    </div>
                    <div class="books-grid" id="books-grid">
                        <!-- Books will be dynamically populated here -->
                    </div>
                </div>

                <script>
                    async function fetchGoodreadsBooks() {
                        try {
                            const corsProxy = 'https://api.allorigins.win/raw?url=';
                            const goodreadsUrl = 'https://www.goodreads.com/review/list_rss/112492946?shelf=read&sort=date_read';
                            const response = await fetch(corsProxy + encodeURIComponent(goodreadsUrl));
                            
                            if (!response.ok) {
                                throw new Error('Failed to fetch books');
                            }
                            
                            const text = await response.text();
                            const parser = new DOMParser();
                            const xml = parser.parseFromString(text, 'text/xml');
                            
                            if (xml.querySelector('parsererror')) {
                                throw new Error('Invalid XML response');
                            }

                            const items = xml.querySelectorAll('item');
                            const books = Array.from(items).slice(0, 12).map(item => {
                                const title = item.querySelector('title')?.textContent.split(' by ')[0] || 'Unknown Title';
                                const author = item.querySelector('author_name')?.textContent || 'Unknown Author';
                                const rating = parseInt(item.querySelector('user_rating')?.textContent) || 0;
                                const readAt = new Date(item.querySelector('user_read_at')?.textContent || null);
                                const bookId = item.querySelector('book_id')?.textContent;
                                const isbn = item.querySelector('isbn')?.textContent;
                                const isbn13 = item.querySelector('isbn13')?.textContent;
                                const imageUrl = item.querySelector('book_large_image_url')?.textContent;
                                
                                return {
                                    title,
                                    author,
                                    rating,
                                    readAt: !isNaN(readAt.getTime()) ? readAt : null,
                                    goodreadsImageUrl: imageUrl,
                                    coverUrl: `https://covers.openlibrary.org/b/isbn/${isbn13 || isbn}-M.jpg`,
                                    openLibraryIdUrl: `https://covers.openlibrary.org/b/id/${bookId}-M.jpg`,
                                    googleCoverUrl: `https://books.google.com/books/content?vid=isbn${isbn13 || isbn}&printsec=frontcover&img=1&zoom=1`,
                                    locCoverUrl: `https://covers.loc.gov/index.php?action=thumbnail&isbn=${isbn13 || isbn}&size=large`,
                                    goodreadsUrl: `https://www.goodreads.com/book/show/${bookId}`
                                };
                            });

                            return books;
                        } catch (error) {
                            console.error('Error fetching books:', error);
                            throw error;
                        }
                    }

                    function createStarRating(rating) {
                        return '★'.repeat(rating) + '☆'.repeat(5 - rating);
                    }

                    function formatDate(date) {
                        if (!date) return '';
                        return date.toLocaleDateString('en-US', {
                            year: 'numeric',
                            month: 'short',
                            day: 'numeric'
                        });
                    }

                    async function displayBooks() {
                        const container = document.getElementById('books-grid');
                        container.innerHTML = '<div class="books-loading">Loading your reading list...</div>';
                        
                        try {
                            const books = await fetchGoodreadsBooks();
                            container.innerHTML = '';
                            
                            books.forEach(book => {
                                const bookCard = document.createElement('a');
                                bookCard.href = book.goodreadsUrl;
                                bookCard.target = '_blank';
                                bookCard.className = 'book-card';
                                bookCard.rel = 'noopener noreferrer';
                                
                                bookCard.innerHTML = `
                                    <div class="book-cover">
                                        <img src="${book.goodreadsImageUrl || book.coverUrl}" 
                                             alt="${book.title} by ${book.author}"
                                             loading="lazy"
                                             onerror="this.onerror=null; this.src='${book.openLibraryIdUrl}'; this.onerror=null; this.src='${book.googleCoverUrl}'; this.onerror=null; this.src='${book.locCoverUrl}'; this.onerror=null; this.src='https://images.unsplash.com/photo-1543002588-bfa74002ed7e?w=400&h=600&fit=crop';">
                                    </div>
                                    <div class="book-info">
                                        <h3 class="book-title">${book.title}</h3>
                                        <p class="book-author">by ${book.author}</p>
                                        <div class="book-rating" aria-label="${book.rating} out of 5 stars">
                                            ${createStarRating(book.rating)}
                                        </div>
                                    </div>
                                `;
                                
                                container.appendChild(bookCard);
                            });
                        } catch (error) {
                            container.innerHTML = `
                                <div class="books-error">
                                    Unable to load books. Please try again later.
                                </div>
                            `;
                        }
                    }

                    // Initialize the books display when the DOM is ready
                    document.addEventListener('DOMContentLoaded', displayBooks);
                </script>
            </section>

            <section class="platform-section spotify-section">
                <div class="platform-header">
                    <a href="https://open.spotify.com/user/acwints?si=ad0abb696b1c4a44" target="_blank" class="platform-link">
                        <div class="platform-logo-wrapper">
                            <img src="https://m.media-amazon.com/images/I/51rttY7a+9L.png" alt="Spotify" class="platform-logo">
                        </div>
                        <h1>Spotify</h1>
                    </a>
                </div>
                <div class="content-grid">
                    <div class="chart-container">
                        <div class="metric-header">
                            <i class="fas fa-music"></i>
                            <h2>Top 10 Songs</h2>
                        </div>
                        <iframe style="border-radius:12px" src="https://open.spotify.com/embed/playlist/0PngHaiE7FXmi9SPFFxOAA?utm_source=generator" width="100%" height="800" frameBorder="0" allowfullscreen="" allow="autoplay; clipboard-write; encrypted-media; fullscreen; picture-in-picture" loading="lazy"></iframe>
                    </div>
                    <div class="chart-container">
                        <div class="metric-header">
                            <i class="fas fa-podcast"></i>
                            <h2>Top 10 Podcasts</h2>
                        </div>
                        <iframe style="border-radius:12px" src="https://open.spotify.com/embed/playlist/5bjGdwfYO81WaOHyF3bBq1?utm_source=generator" width="100%" height="800" frameBorder="0" allowfullscreen="" allow="autoplay; clipboard-write; encrypted-media; fullscreen; picture-in-picture" loading="lazy"></iframe>
                    </div>
                </div>
            </section>
        </div>
    </main>
    <footer>
       
    </footer>
    <script src="sheets.js"></script>
    <script src="charts.js"></script>
    <script>
        document.addEventListener('DOMContentLoaded', loadGoogleApi);
    </script>
</body>
</html> 